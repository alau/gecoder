<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class Rust::Bindings - Gecode/R Developers RDoc</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script src="../js/jquery.js"></script>
<script src="../js/darkfish.js"></script>

<link href="../css/fonts.css" rel="stylesheet">
<link href="../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link"><a href="../Object.html">Object</a>
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-c-create_bindings">::create_bindings</a>
    
    <li ><a href="#method-i-add_custom_definition">#add_custom_definition</a>
    
    <li ><a href="#method-i-add_custom_initialization">#add_custom_initialization</a>
    
    <li ><a href="#method-i-add_module">#add_module</a>
    
    <li ><a href="#method-i-add_namespace">#add_namespace</a>
    
    <li ><a href="#method-i-header">#header</a>
    
    <li ><a href="#method-i-include_header">#include_header</a>
    
    <li ><a href="#method-i-initialize">#initialize</a>
    
    <li ><a href="#method-i-unit">#unit</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Rust::Bindings">
  <h1 id="class-Rust::Bindings" class="class">
    class Rust::Bindings
  </h1>

  <section class="description">
    
<p>Base class to use to create bindings for ruby. You shouldn’t instantiate
this manually, but rather use the <a
href="Bindings.html#method-c-create_bindings">::create_bindings</a>
function.</p>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-add_custom_definition" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_custom_definition</span><span
            class="method-args">(element)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="add_custom_definition-source">
            <pre><span class="ruby-comment"># File vendor/rust/rust/bindings.rb, line 163</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_custom_definition</span>(<span class="ruby-identifier">element</span>)
  <span class="ruby-ivar">@custom_definition</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">element</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-add_custom_initialization" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_custom_initialization</span><span
            class="method-args">(initialization)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="add_custom_initialization-source">
            <pre><span class="ruby-comment"># File vendor/rust/rust/bindings.rb, line 167</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_custom_initialization</span>(<span class="ruby-identifier">initialization</span>)
  <span class="ruby-ivar">@custom_initialization</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">initialization</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-add_module" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_module</span><span
            class="method-args">(name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Create a new Ruby module with the given name; this is used when binding C
libraries, as they don’t use namespace, so you have to create the modules
from scratch.</p>
          
          

          
          <div class="method-source-code" id="add_module-source">
            <pre><span class="ruby-comment"># File vendor/rust/rust/bindings.rb, line 132</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_module</span>(<span class="ruby-identifier">name</span>)
  <span class="ruby-identifier">add_namespace</span>(<span class="ruby-identifier">name</span>, <span class="ruby-string">&quot;&quot;</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-add_namespace" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_namespace</span><span
            class="method-args">(name, cxxname = nil) { |ns| ... }</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Binds a new <a href="Namespace.html">Namespace</a> to a Ruby module; the
name parameter is used as the name of the module, while the cxxname one (if
not null) is used to indicate the actual C++ namespace to use; when binding
a C library, you should rather use the <a
href="Bindings.html#method-i-add_module">#add_module</a> function, although
that’s just a partial wrapper around this one.</p>
          
          

          
          <div class="method-source-code" id="add_namespace-source">
            <pre><span class="ruby-comment"># File vendor/rust/rust/bindings.rb, line 119</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_namespace</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">cxxname</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-identifier">cxxname</span> = <span class="ruby-identifier">name</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">cxxname</span> <span class="ruby-operator">==</span> <span class="ruby-keyword">nil</span> 

  <span class="ruby-identifier">ns</span> = <span class="ruby-constant">Namespace</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">cxxname</span>)

  <span class="ruby-keyword">yield</span> <span class="ruby-identifier">ns</span>

  <span class="ruby-ivar">@modules</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">ns</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-header" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">header</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the content of the header for the bindings, recursively calling the
proper functions to get the declarations for the modules bound and so on.</p>

<p>This should <strong>never</strong> be used directly</p>
          
          

          
          <div class="method-source-code" id="header-source">
            <pre><span class="ruby-comment"># File vendor/rust/rust/bindings.rb, line 141</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">header</span>
  <span class="ruby-constant">Templates</span>[<span class="ruby-string">&quot;BindingsHeader&quot;</span>].
    <span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;!bindings_name!&quot;</span>, <span class="ruby-ivar">@name</span>).
    <span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;!modules_declaration!&quot;</span>, <span class="ruby-ivar">@modules</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">ns</span><span class="ruby-operator">|</span> <span class="ruby-identifier">ns</span>.<span class="ruby-identifier">declaration</span> }.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;\n&quot;</span>)).
    <span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;!cxx_includes!&quot;</span>, <span class="ruby-ivar">@cxx_includes</span>).
    <span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;!c_includes!&quot;</span>, <span class="ruby-ivar">@c_includes</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-include_header" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">include_header</span><span
            class="method-args">(name, scope = Bindings::HeaderGlobal, lang = @lang)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Adds an include header with the specified name. This function adds to the
list of header files to include the one with the specified name.</p>

<p>If the scope paramether is set to <a
href="Bindings.html">Bindings</a>.HeaderLocal, the name of the header file
will be enclosed in double quotes (“”) while including it, while it
will be included it in angle quotes if the parameter is set to <a
href="Bindings.html">Bindings</a>.HeaderGlobal (the default).</p>
          
          

          
          <div class="method-source-code" id="include_header-source">
            <pre><span class="ruby-comment"># File vendor/rust/rust/bindings.rb, line 97</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">include_header</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">scope</span> = <span class="ruby-constant">Bindings</span><span class="ruby-operator">::</span><span class="ruby-constant">HeaderGlobal</span>, <span class="ruby-identifier">lang</span> = <span class="ruby-ivar">@lang</span>)
  <span class="ruby-identifier">name</span> = 
    <span class="ruby-keyword">case</span> <span class="ruby-identifier">scope</span>
    <span class="ruby-keyword">when</span> <span class="ruby-constant">HeaderLocal</span> <span class="ruby-keyword">then</span> <span class="ruby-node">&quot;\&quot;#{name}\&quot;&quot;</span>
    <span class="ruby-keyword">when</span> <span class="ruby-constant">HeaderGlobal</span> <span class="ruby-keyword">then</span> <span class="ruby-node">&quot;&lt;#{name}&gt;&quot;</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;#{scope} not a valid value for scope parameter.&quot;</span>
    <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">case</span> <span class="ruby-identifier">lang</span>
  <span class="ruby-keyword">when</span> <span class="ruby-constant">Bindings</span><span class="ruby-operator">::</span><span class="ruby-constant">LangCxx</span>
    <span class="ruby-ivar">@cxx_includes</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;\n#include #{name}&quot;</span>
  <span class="ruby-keyword">when</span> <span class="ruby-constant">Bindings</span><span class="ruby-operator">::</span><span class="ruby-constant">LangC</span>
    <span class="ruby-ivar">@c_includes</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-node">&quot;\n#include #{name}&quot;</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-unit" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">unit</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns the content of the unit for the bindings, recursively calling the
proper functions to get the definitions and the initialisation function for
the modules bound and so on.</p>

<p>This should <strong>never</strong> be used directly</p>
          
          

          
          <div class="method-source-code" id="unit-source">
            <pre><span class="ruby-comment"># File vendor/rust/rust/bindings.rb, line 154</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">unit</span>
  <span class="ruby-constant">Templates</span>[<span class="ruby-string">&quot;BindingsUnit&quot;</span>].
    <span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;!bindings_name!&quot;</span>, <span class="ruby-ivar">@name</span>).
    <span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;!modules_initialization!&quot;</span>, <span class="ruby-ivar">@modules</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">ns</span><span class="ruby-operator">|</span> <span class="ruby-identifier">ns</span>.<span class="ruby-identifier">initialization</span> }.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;\n&quot;</span>)).
    <span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;!modules_definition!&quot;</span>, <span class="ruby-ivar">@modules</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">ns</span><span class="ruby-operator">|</span> <span class="ruby-identifier">ns</span>.<span class="ruby-identifier">definition</span> }.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;\n&quot;</span>)).
    <span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;!custom_definition!&quot;</span>, <span class="ruby-ivar">@custom_definition</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;\n&quot;</span>)).
    <span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;!custom_initialization!&quot;</span>, <span class="ruby-ivar">@custom_initialization</span>.<span class="ruby-identifier">join</span>(<span class="ruby-string">&quot;\n&quot;</span>))
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="protected-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Protected Instance Methods</h3>
       </header>

    
      <div id="method-i-initialize" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">initialize</span><span
            class="method-args">(name, lang)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="initialize-source">
            <pre><span class="ruby-comment"># File vendor/rust/rust/bindings.rb, line 46</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">lang</span>) <span class="ruby-comment"># :notnew:</span>
  <span class="ruby-ivar">@name</span> = <span class="ruby-identifier">name</span>
  <span class="ruby-ivar">@lang</span> = <span class="ruby-identifier">lang</span>

  <span class="ruby-ivar">@modules</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-ivar">@custom_definition</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-ivar">@custom_initialization</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>
  
  <span class="ruby-ivar">@cxx_includes</span> = <span class="ruby-string">&quot;&quot;</span>
  <span class="ruby-ivar">@c_includes</span> = <span class="ruby-string">&quot;&quot;</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="public-class-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Class Methods</h3>
       </header>

    
      <div id="method-c-create_bindings" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">create_bindings</span><span
            class="method-args">(lang, name) { |bindings| ... }</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>This function is called when creating Ruby bindings for a library.</p>

<p>The first parameter has to be one between Rust::Bindings::LangC or
Rust::Bindings::LangCxx, and tells <a href="../Rust.html">Rust</a> which
programming language the library to bind is written into.</p>

<p>Please note that <a href="../Rust.html">Rust</a> always generates C++ code
even when binding a library written in C, as STL templates are used all
over the generics code.</p>
          
          

          
          <div class="method-source-code" id="create_bindings-source">
            <pre><span class="ruby-comment"># File vendor/rust/rust/bindings.rb, line 68</span>
<span class="ruby-keyword">def</span> <span class="ruby-constant">Bindings</span>.<span class="ruby-identifier">create_bindings</span>(<span class="ruby-identifier">lang</span>, <span class="ruby-identifier">name</span>)
  <span class="ruby-identifier">bindings</span> = 
    <span class="ruby-keyword">case</span> <span class="ruby-identifier">lang</span>
    <span class="ruby-keyword">when</span> <span class="ruby-constant">Bindings</span><span class="ruby-operator">::</span><span class="ruby-constant">LangCxx</span>, <span class="ruby-constant">Bindings</span><span class="ruby-operator">::</span><span class="ruby-constant">LangC</span>
      <span class="ruby-identifier">bindings</span> = <span class="ruby-constant">Bindings</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">lang</span>)
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-node">&quot;#{lang} is not a valid value for type parameter&quot;</span>
    <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">yield</span> <span class="ruby-identifier">bindings</span>

  <span class="ruby-identifier">header</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;#{name}.hh&quot;</span>, <span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">CREAT</span><span class="ruby-operator">|</span><span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">TRUNC</span><span class="ruby-operator">|</span><span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">RDWR</span>)
  <span class="ruby-identifier">unit</span> = <span class="ruby-constant">File</span>.<span class="ruby-identifier">new</span>(<span class="ruby-node">&quot;#{name}.cc&quot;</span>, <span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">CREAT</span><span class="ruby-operator">|</span><span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">TRUNC</span><span class="ruby-operator">|</span><span class="ruby-constant">File</span><span class="ruby-operator">::</span><span class="ruby-constant">RDWR</span>)
  
  <span class="ruby-identifier">header</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">bindings</span>.<span class="ruby-identifier">header</span>
  <span class="ruby-identifier">unit</span>.<span class="ruby-identifier">puts</span> <span class="ruby-identifier">bindings</span>.<span class="ruby-identifier">unit</span>

  <span class="ruby-identifier">header</span>.<span class="ruby-identifier">close</span>
  <span class="ruby-identifier">unit</span>.<span class="ruby-identifier">close</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.2.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

