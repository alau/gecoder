<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>class Rust::Function - Gecode/R Developers RDoc</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../";
</script>

<script src="../js/jquery.js"></script>
<script src="../js/darkfish.js"></script>

<link href="../css/fonts.css" rel="stylesheet">
<link href="../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="class">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../table_of_contents.html#pages">Pages</a>
    <a href="../table_of_contents.html#classes">Classes</a>
    <a href="../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="class-metadata">
    
    <div id="parent-class-section" class="nav-section">
  <h3>Parent</h3>

  
  <p class="link"><a href="Element.html">Rust::Element</a>
  
</div>

    
    
    <!-- Method Quickref -->
<div id="method-list-section" class="nav-section">
  <h3>Methods</h3>

  <ul class="link-list" role="directory">
    
    <li ><a href="#method-i-add_alias">#add_alias</a>
    
    <li ><a href="#method-i-add_overload">#add_overload</a>
    
    <li ><a href="#method-i-add_parameter">#add_parameter</a>
    
    <li ><a href="#method-i-add_parameter_default">#add_parameter_default</a>
    
    <li ><a href="#method-i-add_static_parameter">#add_static_parameter</a>
    
    <li ><a href="#method-i-arguments_range">#arguments_range</a>
    
    <li ><a href="#method-i-bind_call">#bind_call</a>
    
    <li class="calls-super" ><a href="#method-i-initialize">#initialize</a>
    
    <li ><a href="#method-i-paramcount">#paramcount</a>
    
    <li ><a href="#method-i-ruby_parameters">#ruby_parameters</a>
    
    <li ><a href="#method-i-set_custom">#set_custom</a>
    
    <li ><a href="#method-i-stub">#stub</a>
    
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-labelledby="class-Rust::Function">
  <h1 id="class-Rust::Function" class="class">
    class Rust::Function
  </h1>

  <section class="description">
    
<p>This class represent an abstracted bound function; it is not supposed to be
used directly, instead its subclass should be used, like <a
href="CxxClass/Method.html">CxxClass::Method</a>.</p>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    
    <section class="attribute-method-details" class="method-section">
      <header>
        <h3>Attributes</h3>
      </header>

      
      <div id="attribute-i-name" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">name</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-optional_count" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">optional_count</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-parameters" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">parameters</span><span
            class="attribute-access-type">[RW]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
      <div id="attribute-i-varname" class="method-detail">
        <div class="method-heading attribute-method-heading">
          <span class="method-name">varname</span><span
            class="attribute-access-type">[R]</span>
        </div>

        <div class="method-description">
        
        
        
        </div>
      </div>
      
    </section>
    

    
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Public Instance Methods</h3>
       </header>

    
      <div id="method-i-add_alias" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_alias</span><span
            class="method-args">(name)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Adds an alias for the function. The same C++ function can be bound with
more than one name, as CamelCase names in the methods are bound also  with
ruby_style names, so that the users can choose what to use.</p>
          
          

          
          <div class="method-source-code" id="add_alias-source">
            <pre><span class="ruby-comment"># File vendor/rust/rust/function.rb, line 152</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_alias</span>(<span class="ruby-identifier">name</span>)
  <span class="ruby-ivar">@aliases</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">name</span>
  
  <span class="ruby-identifier">nocamel_alias</span> = <span class="ruby-identifier">name</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/([^A-Z])([A-Z])([^A-Z])/</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-operator">|</span><span class="ruby-identifier">letter</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;#{$1}_#{$2.downcase}#{$3}&quot;</span>
  <span class="ruby-keyword">end</span>
  
  <span class="ruby-ivar">@aliases</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">nocamel_alias</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">nocamel_alias</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">name</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-add_overload" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_overload</span><span
            class="method-args">(function)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>private :bind_call</p>
          
          

          
          <div class="method-source-code" id="add_overload-source">
            <pre><span class="ruby-comment"># File vendor/rust/rust/function.rb, line 320</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_overload</span>(<span class="ruby-identifier">function</span>)
  <span class="ruby-identifier">argc</span> = <span class="ruby-identifier">function</span>.<span class="ruby-identifier">parameters</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">not</span> <span class="ruby-ivar">@overloads</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">argc</span>)
    <span class="ruby-ivar">@overloads</span>[<span class="ruby-identifier">argc</span>] = []
    <span class="ruby-ivar">@variable</span> = <span class="ruby-keyword">true</span>
    
    <span class="ruby-ivar">@prototype_template</span> = <span class="ruby-string">&quot;VALUE !function_varname! ( int argc, VALUE *argv, VALUE self )&quot;</span>
    
  <span class="ruby-keyword">end</span>
  
  <span class="ruby-ivar">@overloads</span>[<span class="ruby-identifier">argc</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">function</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-add_parameter" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_parameter</span><span
            class="method-args">(name, type, optional = false) { |param| ... }</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Adds a new parameter to the function</p>
          
          

          
          <div class="method-source-code" id="add_parameter-source">
            <pre><span class="ruby-comment"># File vendor/rust/rust/function.rb, line 163</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_parameter</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">optional</span> = <span class="ruby-keyword">false</span>)
  <span class="ruby-identifier">param</span> = <span class="ruby-constant">Parameter</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">optional</span>)
  <span class="ruby-identifier">param</span>.<span class="ruby-identifier">index</span> = <span class="ruby-ivar">@parameters</span>.<span class="ruby-identifier">size</span><span class="ruby-operator">+</span><span class="ruby-value">1</span>

  <span class="ruby-keyword">if</span> <span class="ruby-identifier">optional</span>
    <span class="ruby-ivar">@variable</span> = <span class="ruby-keyword">true</span> 
    <span class="ruby-ivar">@prototype_template</span> = <span class="ruby-string">&quot;VALUE !function_varname! ( int argc, VALUE *argv, VALUE self )&quot;</span>
    <span class="ruby-ivar">@optional_count</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
  <span class="ruby-keyword">end</span>
  
  <span class="ruby-keyword">yield</span> <span class="ruby-identifier">param</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">block_given?</span>
  
  <span class="ruby-ivar">@parameters</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">param</span>
  
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">param</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-add_parameter_default" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_parameter_default</span><span
            class="method-args">(name, type, value)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Adds a parameter with a default value. See <a
href="Function/DefaultParameter.html">Rust::Function::DefaultParameter</a></p>
          
          

          
          <div class="method-source-code" id="add_parameter_default-source">
            <pre><span class="ruby-comment"># File vendor/rust/rust/function.rb, line 182</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_parameter_default</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">value</span>)
  <span class="ruby-ivar">@variable</span> = <span class="ruby-keyword">true</span>
  <span class="ruby-ivar">@prototype_template</span> = <span class="ruby-string">&quot;VALUE !function_varname! ( int argc, VALUE *argv, VALUE self )&quot;</span>

  <span class="ruby-identifier">param</span> = <span class="ruby-constant">DefaultParameter</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">name</span>, <span class="ruby-identifier">type</span>, <span class="ruby-identifier">value</span>)

  <span class="ruby-ivar">@parameters</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">param</span>

  <span class="ruby-keyword">return</span> <span class="ruby-identifier">param</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-add_static_parameter" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">add_static_parameter</span><span
            class="method-args">(value)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Adds a constant parameter, see <a
href="Function/StaticParameter.html">Rust::Function::StaticParameter</a></p>
          
          

          
          <div class="method-source-code" id="add_static_parameter-source">
            <pre><span class="ruby-comment"># File vendor/rust/rust/function.rb, line 194</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">add_static_parameter</span>(<span class="ruby-identifier">value</span>)
  <span class="ruby-identifier">param</span> = <span class="ruby-constant">StaticParameter</span>.<span class="ruby-identifier">new</span>(<span class="ruby-identifier">value</span>)

  <span class="ruby-ivar">@parameters</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">param</span>

  <span class="ruby-keyword">return</span> <span class="ruby-identifier">param</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-arguments_range" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">arguments_range</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Returns an array of the valid cases for variable-argument calls. For
instance, a function might need _at least_ three parameters, and can accept
_up to_ nine parameters. In that case the range would be 3..9. The upper
boundary is always the same of paramcount, while the lower depends on the
first optional parameter found. Parameters with default are like optional
parameters.</p>
          
          

          
          <div class="method-source-code" id="arguments_range-source">
            <pre><span class="ruby-comment"># File vendor/rust/rust/function.rb, line 246</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">arguments_range</span>
  <span class="ruby-identifier">lower_bound</span> = <span class="ruby-value">0</span>
  <span class="ruby-ivar">@parameters</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">param</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">break</span> <span class="ruby-keyword">if</span> (<span class="ruby-identifier">param</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-string">&quot;default&quot;</span>) <span class="ruby-keyword">or</span> <span class="ruby-identifier">param</span>.<span class="ruby-identifier">optional</span>)

    <span class="ruby-identifier">lower_bound</span> = <span class="ruby-identifier">lower_bound</span> <span class="ruby-value">+1</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">return</span> <span class="ruby-identifier">lower_bound</span><span class="ruby-operator">..</span><span class="ruby-identifier">paramcount</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-bind_call" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">bind_call</span><span
            class="method-args">(nparam = nil)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="bind_call-source">
            <pre><span class="ruby-comment"># File vendor/rust/rust/function.rb, line 302</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">bind_call</span>(<span class="ruby-identifier">nparam</span> = <span class="ruby-keyword">nil</span>)
  <span class="ruby-keyword">case</span> <span class="ruby-ivar">@return</span>
  <span class="ruby-keyword">when</span> <span class="ruby-keyword">nil</span>
    <span class="ruby-identifier">raise</span> <span class="ruby-string">&quot;nil return value is not supported for non-constructors.&quot;</span>
  <span class="ruby-keyword">when</span> <span class="ruby-string">&quot;void&quot;</span>
    <span class="ruby-keyword">return</span> <span class="ruby-node">&quot;#{raw_call(nparam)}; return Qnil;\n&quot;</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">type</span> = <span class="ruby-constant">Type</span>.<span class="ruby-identifier">new</span>(<span class="ruby-ivar">@return</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-keyword">not</span> <span class="ruby-ivar">@return</span>.<span class="ruby-identifier">include?</span>(<span class="ruby-string">&quot;*&quot;</span>) <span class="ruby-keyword">and</span> <span class="ruby-keyword">not</span> <span class="ruby-identifier">type</span>.<span class="ruby-identifier">native?</span>
      <span class="ruby-node">&quot;return cxx2ruby( new #{@return.gsub(&quot;&amp;&quot;, &quot;&quot;)}(#{raw_call(nparam)}), true );\n&quot;</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-node">&quot;return cxx2ruby( static_cast&lt;#{@return}&gt;(#{raw_call(nparam)}) );\n&quot;</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-paramcount" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">paramcount</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Gets the parameters’ count. For variable-arguments functions, this
returns -1, while for other functions the count depends on the parameters
added, as there might be parameters which are passed constant values (e.g.
the instance parameter for class wrappers), that are not counted for
Ruby-side parameters count.</p>
          
          

          
          <div class="method-source-code" id="paramcount-source">
            <pre><span class="ruby-comment"># File vendor/rust/rust/function.rb, line 218</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">paramcount</span>
  <span class="ruby-keyword">return</span> <span class="ruby-ivar">@custom_paramcount</span> <span class="ruby-keyword">if</span> <span class="ruby-keyword">not</span> <span class="ruby-ivar">@custom_paramcount</span>.<span class="ruby-identifier">nil?</span>
  <span class="ruby-keyword">return</span> <span class="ruby-value">-1</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@variable</span>

  <span class="ruby-identifier">paramcount</span> = <span class="ruby-value">0</span>
  <span class="ruby-ivar">@parameters</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">param</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">paramcount</span> = <span class="ruby-identifier">paramcount</span> <span class="ruby-value">+1</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">param</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-string">&quot;value&quot;</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-keyword">return</span> <span class="ruby-identifier">paramcount</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-ruby_parameters" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">ruby_parameters</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Provides a string with the parameters that are actually</p>
          
          

          
          <div class="method-source-code" id="ruby_parameters-source">
            <pre><span class="ruby-comment"># File vendor/rust/rust/function.rb, line 231</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">ruby_parameters</span>
  <span class="ruby-ivar">@parameters</span>.<span class="ruby-identifier">collect</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">param</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">param</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-string">&quot;value&quot;</span>)

    <span class="ruby-node">&quot;, VALUE #{param.argname}&quot;</span>
  <span class="ruby-keyword">end</span>.<span class="ruby-identifier">join</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-set_custom" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">set_custom</span><span
            class="method-args">(prototype, definition, argc)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Set different, non-default templates for functions, that can be used when
many functions of the bound C/C++ library contains functions that require
to be handled in a particular way.</p>
          
          

          
          <div class="method-source-code" id="set_custom-source">
            <pre><span class="ruby-comment"># File vendor/rust/rust/function.rb, line 205</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">set_custom</span>(<span class="ruby-identifier">prototype</span>, <span class="ruby-identifier">definition</span>, <span class="ruby-identifier">argc</span>)
  <span class="ruby-ivar">@definition_template</span> = <span class="ruby-identifier">definition</span>
  <span class="ruby-ivar">@prototype_template</span> = <span class="ruby-identifier">prototype</span>
  <span class="ruby-ivar">@custom_paramcount</span> = <span class="ruby-identifier">argc</span>
  
  <span class="ruby-ivar">@variable</span> = <span class="ruby-keyword">true</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">argc</span> <span class="ruby-operator">==</span> <span class="ruby-value">-1</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
      <div id="method-i-stub" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">stub</span><span
            class="method-args">()</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          
          
          

          
          <div class="method-source-code" id="stub-source">
            <pre><span class="ruby-comment"># File vendor/rust/rust/function.rb, line 333</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">stub</span>
  <span class="ruby-keyword">return</span> <span class="ruby-identifier">bind_call</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@variable</span>
  <span class="ruby-identifier">calls</span> = <span class="ruby-string">&quot;&quot;</span>
  
  
  <span class="ruby-identifier">overloads</span> = <span class="ruby-ivar">@overloads</span>.<span class="ruby-identifier">dup</span>
  
  <span class="ruby-identifier">key</span> = <span class="ruby-ivar">@parameters</span>.<span class="ruby-identifier">size</span>
  <span class="ruby-keyword">if</span> <span class="ruby-keyword">not</span> <span class="ruby-identifier">overloads</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">key</span>)
    <span class="ruby-identifier">overloads</span>[<span class="ruby-identifier">key</span>] = [ <span class="ruby-keyword">self</span> ]
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">overloads</span>[<span class="ruby-identifier">key</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-keyword">self</span>
  <span class="ruby-keyword">end</span>
  
  <span class="ruby-identifier">options</span> = []
  <span class="ruby-identifier">overloads</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">argc</span>, <span class="ruby-identifier">functions</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">functions</span>.<span class="ruby-identifier">uniq!</span>
    <span class="ruby-identifier">functions</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">function</span><span class="ruby-operator">|</span>
      <span class="ruby-keyword">if</span> <span class="ruby-identifier">function</span>.<span class="ruby-identifier">optional_count</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
        <span class="ruby-identifier">option</span> = <span class="ruby-identifier">function</span>.<span class="ruby-identifier">dup</span>
        
        <span class="ruby-identifier">option</span>.<span class="ruby-identifier">optional_count</span>.<span class="ruby-identifier">times</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
          <span class="ruby-identifier">option</span>.<span class="ruby-identifier">parameters</span> = []
          <span class="ruby-value">0</span>.<span class="ruby-identifier">upto</span>(<span class="ruby-identifier">function</span>.<span class="ruby-identifier">parameters</span>.<span class="ruby-identifier">size</span>() <span class="ruby-operator">-</span> <span class="ruby-identifier">i</span> <span class="ruby-operator">-</span> <span class="ruby-value">1</span>) { <span class="ruby-operator">|</span><span class="ruby-identifier">pindex</span><span class="ruby-operator">|</span>
              <span class="ruby-identifier">option</span>.<span class="ruby-identifier">parameters</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">function</span>.<span class="ruby-identifier">parameters</span>[<span class="ruby-identifier">pindex</span>].<span class="ruby-identifier">dup</span>
          }
          
          <span class="ruby-identifier">options</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">option</span>
        }
      <span class="ruby-keyword">end</span>
    }
  }
  
  <span class="ruby-identifier">options</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">opt</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">overloads</span>.<span class="ruby-identifier">has_key?</span>(<span class="ruby-identifier">opt</span>.<span class="ruby-identifier">parameters</span>.<span class="ruby-identifier">size</span>) <span class="ruby-operator">?</span> <span class="ruby-identifier">overloads</span>[<span class="ruby-identifier">opt</span>.<span class="ruby-identifier">parameters</span>.<span class="ruby-identifier">size</span>] <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">opt</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">overloads</span>[<span class="ruby-identifier">opt</span>.<span class="ruby-identifier">parameters</span>.<span class="ruby-identifier">size</span>] = [ <span class="ruby-identifier">opt</span> ] 
  }
  
  <span class="ruby-identifier">overloads</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">argc</span>, <span class="ruby-identifier">functions</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">call</span> = <span class="ruby-node">&quot;     case #{argc}: {\n&quot;</span>
    <span class="ruby-identifier">current_function_index</span> = <span class="ruby-value">0</span>
    
    <span class="ruby-identifier">functions</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">func</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">functions</span>.<span class="ruby-identifier">uniq!</span>
      <span class="ruby-identifier">call</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;// Case #{current_function_index}\n&quot;</span>
      <span class="ruby-identifier">argc</span>.<span class="ruby-identifier">times</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">argindex</span><span class="ruby-operator">|</span> <span class="ruby-comment"># Verify types</span>
        <span class="ruby-identifier">param</span> = <span class="ruby-identifier">func</span>.<span class="ruby-identifier">parameters</span>[<span class="ruby-identifier">argindex</span>]
        <span class="ruby-identifier">valid_name</span> = <span class="ruby-identifier">param</span>.<span class="ruby-identifier">to_s</span>
        
        <span class="ruby-keyword">if</span> <span class="ruby-keyword">not</span> <span class="ruby-identifier">param</span>.<span class="ruby-identifier">native?</span>
          <span class="ruby-identifier">valid_name</span>.<span class="ruby-identifier">gsub!</span>(<span class="ruby-string">&quot;Ptr&quot;</span>, <span class="ruby-string">&quot;&quot;</span>)
        <span class="ruby-keyword">end</span>
        
        <span class="ruby-keyword">if</span> <span class="ruby-identifier">param</span>.<span class="ruby-identifier">array?</span>
          <span class="ruby-identifier">call</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;      if( is_array(argv[#{argindex}]) ) {\n&quot;</span> 
        <span class="ruby-keyword">else</span>
          <span class="ruby-identifier">call</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;      if( is_#{valid_name}(argv[#{argindex}]) ) {\n&quot;</span> 
        <span class="ruby-keyword">end</span>
      }
    
      <span class="ruby-identifier">call</span> <span class="ruby-operator">+=</span> <span class="ruby-node">&quot;           #{func.bind_call(argc)}&quot;</span>
      <span class="ruby-identifier">call</span> <span class="ruby-operator">+=</span> <span class="ruby-string">&quot;           ok = true;\n&quot;</span>
<span class="ruby-identifier">call</span> <span class="ruby-operator">+=</span> <span class="ruby-string">&quot;}&quot;</span><span class="ruby-operator">*</span><span class="ruby-identifier">argc</span> <span class="ruby-comment"># closes if's</span>
<span class="ruby-identifier">call</span> <span class="ruby-operator">+=</span> <span class="ruby-string">&quot;\n&quot;</span>

<span class="ruby-identifier">current_function_index</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
    }
    <span class="ruby-identifier">call</span> <span class="ruby-operator">+=</span> <span class="ruby-string">&quot;     } break;\n&quot;</span>
    
    <span class="ruby-identifier">calls</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">call</span>
  }
  
  <span class="ruby-keyword">return</span> <span class="ruby-constant">Templates</span>[<span class="ruby-string">&quot;VariableFunctionCall&quot;</span>].<span class="ruby-identifier">gsub</span>(<span class="ruby-string">&quot;!calls!&quot;</span>, <span class="ruby-identifier">calls</span>)
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
     <section id="protected-instance-5Buntitled-5D-method-details" class="method-section">
       <header>
         <h3>Protected Instance Methods</h3>
       </header>

    
      <div id="method-i-initialize" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">initialize</span><span
            class="method-args">(params)</span>
          
          <span class="method-click-advice">click to toggle source</span>
          
        </div>
        

        <div class="method-description">
          
          <p>Initialisation function, sets the important parameters from the params hash
provided, and the derived information that are needed.</p>
          
          
            <div class="method-calls-super">
              Calls superclass method
              
            </div>
          

          
          <div class="method-source-code" id="initialize-source">
            <pre><span class="ruby-comment"># File vendor/rust/rust/function.rb, line 110</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">params</span>) <span class="ruby-comment"># :notnew:</span>
  <span class="ruby-keyword">super</span>()

  <span class="ruby-ivar">@overloads</span> = {}
  <span class="ruby-ivar">@return</span> = <span class="ruby-identifier">params</span>[<span class="ruby-value">:return</span>]
  <span class="ruby-ivar">@name</span> = <span class="ruby-identifier">params</span>[<span class="ruby-value">:name</span>]
  <span class="ruby-ivar">@bindname</span> = <span class="ruby-identifier">params</span>[<span class="ruby-value">:bindname</span>]
  <span class="ruby-ivar">@parent</span> = <span class="ruby-identifier">params</span>[<span class="ruby-value">:parent</span>]
  <span class="ruby-ivar">@optional_count</span> = <span class="ruby-value">0</span>

  <span class="ruby-ivar">@varname</span> = <span class="ruby-node">&quot;f#{@parent.varname}#{@name.gsub('::', '_').gsub(/[&lt;&gt;]/, '')}&quot;</span>

  <span class="ruby-ivar">@aliases</span> = <span class="ruby-constant">Set</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-ivar">@variable</span> = <span class="ruby-keyword">false</span> <span class="ruby-comment"># Variable arguments function</span>

  <span class="ruby-ivar">@parameters</span> = <span class="ruby-constant">Array</span>.<span class="ruby-identifier">new</span>
  <span class="ruby-identifier">nocamel_bindname</span> = <span class="ruby-ivar">@bindname</span>.<span class="ruby-identifier">gsub</span>(<span class="ruby-regexp">/([^A-Z])([A-Z])([^A-Z])/</span>) <span class="ruby-keyword">do</span>
    <span class="ruby-operator">|</span><span class="ruby-identifier">letter</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;#{$1}_#{$2.downcase}#{$3}&quot;</span>
  <span class="ruby-keyword">end</span>
  
  <span class="ruby-ivar">@aliases</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">nocamel_bindname</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">nocamel_bindname</span> <span class="ruby-operator">==</span> <span class="ruby-ivar">@bindname</span>

  <span class="ruby-ivar">@declaration_template</span> = <span class="ruby-string">&quot;!function_prototype!;\n&quot;</span>
  <span class="ruby-ivar">@definition_template</span> = <span class="ruby-constant">Templates</span>[<span class="ruby-string">&quot;FunctionDefinition&quot;</span>]
  <span class="ruby-ivar">@prototype_template</span> = <span class="ruby-string">&quot;VALUE !function_varname! ( VALUE self !function_parameters! )&quot;</span>
  <span class="ruby-ivar">@initialization_template</span> = <span class="ruby-constant">Templates</span>[<span class="ruby-string">&quot;FunctionInitBinding&quot;</span>]
  
  <span class="ruby-identifier">add_expansion</span> <span class="ruby-string">'function_aliases'</span>, <span class="ruby-string">'@aliases.collect { |alii| Templates[&quot;FunctionInitAlias&quot;].gsub(&quot;!function_alias!&quot;, alii) }.join(&quot;\n&quot;)'</span>
  <span class="ruby-identifier">add_expansion</span> <span class="ruby-string">'function_prototype'</span>, <span class="ruby-string">'@prototype_template'</span>
  <span class="ruby-identifier">add_expansion</span> <span class="ruby-string">'function_parameters'</span>, <span class="ruby-string">'ruby_parameters'</span>
  <span class="ruby-identifier">add_expansion</span> <span class="ruby-string">'function_call'</span>, <span class="ruby-string">'stub'</span>
  <span class="ruby-identifier">add_expansion</span> <span class="ruby-string">'function_varname'</span>, <span class="ruby-string">'varname'</span>
  <span class="ruby-identifier">add_expansion</span> <span class="ruby-string">'function_cname'</span>, <span class="ruby-string">'varname'</span>
  <span class="ruby-identifier">add_expansion</span> <span class="ruby-string">'function_paramcount'</span>, <span class="ruby-string">'paramcount'</span>
  <span class="ruby-identifier">add_expansion</span> <span class="ruby-string">'function_bindname'</span>, <span class="ruby-string">'@bindname'</span>
  <span class="ruby-identifier">add_expansion</span> <span class="ruby-string">'parent_varname'</span>, <span class="ruby-string">'@parent.varname'</span>
<span class="ruby-keyword">end</span></pre>
          </div>
          
        </div>

        

        
      </div>

    
    </section>
  
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://docs.seattlerb.org/rdoc/">RDoc</a> 4.2.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

